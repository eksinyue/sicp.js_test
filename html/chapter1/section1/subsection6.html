<div id='permalink-msg'>
<div class='screen'>
	<div class='alert alert-success'>
		<strong>Permalink copied!</strong>
	</div>
</div>
</div>

<div class='chapter-content'>
<div class='chapter-title'>
	<div class='permalink'>
		<a name='top' class='permalink'>1.1.6  Conditional Expressions and Predicates</a>
	</div>
</div>
	<div class='chapter-text'>
		<div class='SUBSECTION'><SUBSECTION>
        

        <SPLIT>
          
          
            <div class='permalink'>
<a name='p1' class='permalink'></a><p>
              The expressive power of the class of functions that we can declare at
              this point is very limited, because we have no way to make tests and
              to perform different operations depending on the result of a test.
              For instance, we cannot declare a function that computes the 
              
              absolute
              value of a number by testing whether the number is negative or not,
              and taking different actions in each case according
              to the rule
              
                  \[
                  |x| = \left\{ \begin{array}{rl}
                  x   & \mbox{if $x \geq 0$} \\
                  -x  & \mbox{otherwise}
                  \end{array}
                  \right.
                  \]
              
              This construct is a <EM>case analysis</EM> and can be expressed
	      in JavaScript using a <EM>conditional expression</EM> as follows:
              <div class='snippet' id='javascript_7_1_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
function abs(x) {
    return x >= 0 ? x : -x;
}
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=GYVwdgxgLglg9mABAQwEYGcAUAPAlIgbwChFTEAnAUyhHKW0QD4BeRABkQH5EGAuRALTYA3EQC+RImiwCArLmFA}{\usebox\lstbox}
</pre>

</div></div>
              
              The general form of a conditional expression is
              <kbd class='snippet'>
                
$\textit{predicate}$ ? $\textit{consequent-expression}$ : $\textit{alternative-expression}$
                
              </kbd>
              Conditional expressions begin with a
              
              $\textit{predicate}$â€”that is, 
              an expression whose value is interpreted as either
	      <EM>true</EM> or
	      <EM>false</EM>,
	      two distinguished
	      <EM>boolean</EM> values in JavaScript.<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
	      Note that the primitive boolean expressions
	      <kbd>true</kbd> and
	      <kbd>false</kbd> trivially evaluate
	      to the boolean values <EM>true</EM> and <EM>false</EM>, respectively.
	      The $\textit{predicate}$ 
              is followed by a question mark, the 
              $\textit{consequent-expression}$, 
              a colon, and finally the
              $\textit{alternative-expression}$.
            </p></div>
          
      </SPLIT>

        <SPLIT>
          
          
            <div class='permalink'>
<a name='p2' class='permalink'></a><p>
              To evaluate a conditional expression,
              the interpreter starts by evaluating the 
              
              $\textit{predicate}$ 
              part of the expression.  
              If the $\textit{predicate}$ 
              evaluates to <EM>true</EM>, the interpreter evaluates
              
              $\textit{consequent-expression}$.
              Otherwise it evaluates 
              
              $\textit{alternative-expression}$.
            </p></div>
          
        </SPLIT>

        <SPLIT>
          
          
            <div class='permalink'>
<a name='p3' class='permalink'></a><p>
              
              The word <EM>predicate</EM> is used for functions that return
	      <EM>true</EM> or <EM>false</EM>, as well as for expressions that
	      evaluate to <EM>true</EM> or <EM>false</EM>.
              The absolute-value function <kbd>abs</kbd> 
              makes use of the 
              
              
              
              
              primitive
              predicate <kbd>>=</kbd>.
	      This predicate takes two
              numbers as arguments and tests whether the first number is
              greater than or equal to the second number,
              returning <EM>true</EM> or <EM>false</EM> accordingly.
            </p></div>
          
        </SPLIT>

        <SPLIT>
          
        </SPLIT>

        <SPLIT>
          
        </SPLIT>

        <SPLIT>
          
          
            <div class='permalink'>
<a name='p4' class='permalink'></a><p>
              JavaScript
              provides a number of primitive predicates that work similar to
              <kbd>>=</kbd>, including
              <kbd>></kbd>, 
              <kbd><</kbd>,
              <kbd><=</kbd>, and
              <kbd>===</kbd>.
              In addition to these primitive
              predicates, there are logical
              composition operations, which enable us to construct compound
              predicates.  
              The three most frequently used are these:
              <UL>
                
                
                    <LI>$ \textit{expression}_1$ <kbd>&&</kbd>
		    $\textit{expression}_2$

                  The interpreter
                  evaluates $\textit{expression}_1$.
                  If it evaluates to <EM>false</EM>, 
                  the value of the whole 
                  expression is <EM>false</EM>,
		  and $\textit{expression}_2$
                  is not evaluated.
                  If $\textit{expression}_1$ evaluates
		  to <EM>true</EM>, the value of the whole expression
                  is the value of 
                  $\textit{expression}_2$.
                  
                </LI>
                <LI>
                  
                  $\textit{expression}_1$ 
                  <kbd>||</kbd> 
                  $\textit{expression}_2$

                  The interpreter evaluates 
                  $\textit{expression}_1$. If
                  it evaluates to <EM>true</EM>, 
                  the value of the whole expression is <EM>true</EM>, and 
                  $\textit{expression}_2$ is not
		  evaluated.
                  If $\textit{expression}_1$ evaluates
		  to <EM>false</EM>, the value of the whole expression is the
		  value of $\textit{expression}_2$.
                </LI>
                
                <LI>
                  <kbd>!</kbd> $\textit{expression}$

                  The value of the expression is <EM>true</EM>
                  when $\textit{expression}$
		  evaluates to <EM>false</EM>, 
                  and <EM>false</EM> otherwise.
                </LI>
              </UL>
              
              Notice that <kbd>&&</kbd> and 
              <kbd>||</kbd> are not evaluated like
	      arithmetic operators such as 
              <kbd>+</kbd>, because their right-hand
              expression is not always evaluated. The operator
              <kbd>!</kbd>, on the other hand, 
              follows the evaluation rule of section
	      \ref{sec:evaluating-combinations}. 
              It is a <EM>unary</EM> operator, which means that it takes only
	      one argument, whereas the
              arithmetic operators encountered so far are <EM>binary</EM>, 
              taking two arguments. The operator
              <kbd>!</kbd> precedes its argument;
	      we call it a <EM>prefix operator</EM>.
	      Another prefix operator is
	      the unary <QUOTE>minus</QUOTE> operator, an example of
	      which is the expression <kbd>-x</kbd>
	      of the function <kbd>abs</kbd>
	      in the beginning of this section.
            </p></div>
          
        </SPLIT>

        <SPLIT>
          
          
            <div class='permalink'>
<a name='p5' class='permalink'></a><p>
              As an example of how these predicates are used, the condition that a 
              number $x$
              be in the range $5 < x < 10$
	      may be expressed as
              <div class='snippet' id='javascript_7_2_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
x > 5 && x < 10
</pre></div></div>
              Note that the binary
              operator <kbd>&&</kbd>
              has lower precedence than the comparison operators
              <kbd>></kbd> and
              <kbd><</kbd>.
            </p></div>
          
        </SPLIT>

        <SPLIT>
          
          
            <div class='permalink'>
<a name='p6' class='permalink'></a><p>
              
              <div class='snippet' id='javascript_7_3_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
function not_equal(x, y) {
    return x > y || x < y;
}
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=GYVwdgxgLglg9mABGOUD6BTAjiAhgGwAoAPAGkQE8BKRAbwChEnEAnDKEFpYxAPksQAfQYh4AeSgG56AX3r0U6bHiIB2cgBYqkoA}{\usebox\lstbox}
</pre>

</div></div>
              or alternatively as
              <div class='snippet' id='javascript_7_4_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
function not_equal(x, y) {
    return !(x >= y && x <= y);
}
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=GYVwdgxgLglg9mABGOUD6BTAjiAhgGwAoAPAGkQE8BKRAbwChEnEAnDKEFpAQhMQD4AvJUQAyUYmKIAPMOoBuegF969FOmx4iAdnIAWKvKA}{\usebox\lstbox}
</pre>

</div></div>

              


              Note that the operator <kbd>!==</kbd> when applied 
              to two numbers, behaves the same as 
              <kbd>not_equal</kbd>.
            </p></div>
          
        </SPLIT>

        
\stepcounter{ExerciseDisplayNumber}
\begin{Exercise}

        <SPLIT>
          
          
            <div class='permalink'>
<a name='p7' class='permalink'></a><p>
                Below is a sequence of statements. Before you click on a statement,
                predict what the result of its evaluation will be.
            </p></div>
          
        </SPLIT>

                  <div class='snippet' id='javascript_7_5_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
10;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=IwBg3EA}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_6_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
5 + 3 + 4;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=KwAg1CDM4gLA3EA}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_7_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
9 - 1;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=JwAgtCCMDcQ}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_8_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
6 / 2;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=GwAg9CBMDcQ}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_9_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
2 * 4 + (4 - 6);
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=EwAgVCAsINQgFNAtCAbASgNxA}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_10_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
const a = 3;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBAhjAvDAzAbiA}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_11_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
const b = a + 1;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBAhjAvDAzAbgFCkrARk+GAahgEY0g}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_12_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
a + b + a * b;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBARjAvDAhjA1DAjAbgFBqYKZoBU8OQA}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_13_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
a === b;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBARjAvDAhjA1DAjAbgFBqJHw5A}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_14_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
b > a && b < a * b 
   ? b : a;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBARjAvDAhjA1DAjAbgFAIB8qMAZKfDADwkBUleMTA-JQFyo5A}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_15_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
a === 4 ? 6 : b === 4 ? 6 + 7 + a : 25;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBARjAvDAhjA1DAjAbgFBqJEwAsMA-DAGwwBc8SxZlNmA7BqnTAEwCsOIA}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_16_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
2 + (b > a ? b : a);
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBARjAvDAhjA1DAjAbgFABMGMAFAgHyowD88MAXKgJQ5A}{\usebox\lstbox}
</pre>

</div></div>
                <div class='snippet' id='javascript_7_17_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
(a > b
 ? a
 : a < b
   ? b
   : -1)
*
\end{JavaScriptClickable}
\end{lrbox}
\begin{JavaScriptClickable}
/*!\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBARjAvDAhjA1DAjAbgFAAUaAfPHjAPyrkBcqMAPGTC1XOS3QLRYCUeAKkJpMfHEA}{\usebox\lstbox}!*/
(a + 1);

\end{JavaScriptClickable}
</pre>

</div></div>
                <SPLIT>
                  
                Note that the statement
                <div class='snippet' id='javascript_7_18_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
a === 4 ? 6 : b === 4 ? 6 + 7 + a : 25;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBARjAvDAhjA1DAjAbgFBqJEwAsMA-DAGwwBc8SxZlNmA7BqnTAEwCsOIA}{\usebox\lstbox}
</pre>

</div></div>
                consists of two conditional expressions, where the second
                one forms the alternative of the first one. If you want
                to make that clear, you can indent the lines like this:
                <div class='snippet' id='javascript_7_19_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
a === 4
? 6
: b === 4 
  ? 6 + 7 + a
  : 25;
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=MYewdgzgLgBARjAvDAhjA1DAjAbgFBqJEwAseA-DAGx4Bc8SxJMeMMlVGMA7FyqzHoAmAKw4gA}{\usebox\lstbox}
</pre>

</div></div>
                  
                </SPLIT>
        
\end{Exercise}


        
\stepcounter{ExerciseDisplayNumber}
\begin{Exercise}
\label{ex:unlabeled7}

                Translate the following expression into 
          
          
          
            JavaScript
          
          
          
                    \[
                    \frac{5+4+\left(2-\left(3-(6+\frac{4}{5})\right)\right)}{3 (6-2) (2-7)}
                    \]
          
    
    \hfill{\hyperref[ex:unlabeled7-Answer]{Solution}}\\
\end{Exercise}

\begin{Answer}[ref={ex:unlabeled7}]
   
    <div class='snippet' id='javascript_7_20_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
(5 + 4 + (2 - (3 - (6 + 4 / 5)))) 
/
(3 * (6 - 2) * (2 - 7));
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=BQVgBA1GAslsAmMBaeBmF8BsdYHowQBKEosAKD3OAwCptMEz7FMB2EgbiA}{\usebox\lstbox}
</pre>

</div></div>
  
\end{Answer}

        
\stepcounter{ExerciseDisplayNumber}
\begin{Exercise}
\label{ex:unlabeled8}

                
                  
                  
		    Declare a
                    function
                  
                
                that takes three numbers as arguments and returns
                the sum of the squares of the two larger numbers.
                
                
        \hfill{\hyperref[ex:unlabeled8-Answer]{Solution}}\\
\end{Exercise}

\begin{Answer}[ref={ex:unlabeled8}]

                <div class='snippet' id='javascript_7_21_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
function f(x, y, z) {
   return square(x) + square(y) + square(z) -
          // subtract the square of the smallest
          square(x > y ? (y > z ? z : y) : (x > z ? z : x));
}
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=GYVwdgxgLglg9mABAZwI4gIYCcCmAKADwEpEBvAKESsVyhCyQMQCpECBucgX3NElgSJghADSIAnmIBeJCtVr0kaTLkIkA1CnTZ84jVpX4ZiALSVqFqgHorKEACMoWDNERQAFjgM7EcYG88UAFsMABtQnGQoc0tqZR1CRAA+CUQAfkQ8cWTEKXTcxAAuCRJixJS8jLzi4iJOHl48ABYxAHYxACY6oA}{\usebox\lstbox}
</pre>

</div></div>
              
\end{Answer}


              
\stepcounter{ExerciseDisplayNumber}
\begin{Exercise}

        <SPLIT>
          
          
            
            
            
            Observe that our model of evaluation allows for application
	    combinations whose
            function expressions are compound expressions.
	    Use this observation to
            describe the behavior of the following function:
                <div class='snippet' id='javascript_7_22_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
function plus(a, b) { return a + b; }
function minus(a, b) { return a - b; }
function a_plus_abs_b(a, b) {
    return (b >= 0 ? plus : minus)(a, b);
}
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=GYVwdgxgLglg9mABABwDYgM4AoCGAaRAIwEpEBvRAJwFMoRKkdEBqIgbkQF8AoUSWBIgC2MMJlwES5KrXqNEAWnZde4aPEYB9NJk05CGTYQlFSZboksy6DRFkKIAfAF5EABkQB+FOgyIAXMKimMQmJGzcPNw42r56BkZYAKwECgAsxGxAA}{\usebox\lstbox}
</pre>

</div></div>
                
                Note that in the conditional expression, we cannot directly use the operators
                <kbd>+</kbd> and
                <kbd>-</kbd> instead of the
                names
                <kbd>plus</kbd> and
                <kbd>minus</kbd> because in infix notation,
		only operator symbols are allowed in the middle,
		not compound expressions.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>
          
	  
        </SPLIT>
              \hfill{\hyperref[ex:a-plus-abs-b-Answer]{Solution}}\\
\end{Exercise}

\begin{Answer}[ref={ex:a-plus-abs-b}]

	    According to section \ref{sec:substitution-model}, evaluation
	    of a application expression
	    proceeds as follows:
              
\begin{enumerate}[a.]
\item{Evaluate the function expression 
		of the application
		combination, resulting in the function to be applied.}
\item{Evaluate the argument expressions of the combination.}
\item{Evaluate the return expression of the function with each
		parameter replaced by the corresponding argument.
                }
\end{enumerate}

	      Thus the evaluation of the application expression 
	      <kbd>a_plus_abs_b(5, -4)</kbd>
	      (1) evaluates <kbd>a_plus_abs_b</kbd>,
	      resulting in the function given above, and (2) the arguments are
	      already values. So we need to evaluate (3) the return expression
	      of the function,
	      with the parameters replaced by the arguments, thus:
	      <kbd>(-4 >= 0 ? plus : minus)(5, -4)</kbd>.
	      With the same rules, we need to (1) evaluate the function expression,
	      which in this case is the conditional expression
	      <kbd>-4 >= 0 ? plus : minus</kbd>. Since
	      the predicate evaluates to <EM>false</EM>, the function expression
	      evaluates to <kbd>minus</kbd>.
	      The arguments, again (2) are already values.
	      Thus we
	      end up evaluating (3) the body of
	      <kbd>minus</kbd> with
	      the parameters
	      <kbd>a</kbd> and 
	      <kbd>b</kbd> 
	      replaced by 5 and -4, respectively, resulting in
	      <kbd>5 - (-4)</kbd>, which
	      will finally evaluate to 9.
	  
\end{Answer}

        
\stepcounter{ExerciseDisplayNumber}
\begin{Exercise}

                
                
                
                Ben Bitdiddle has invented a test to determine whether the interpreter
                he is faced with is using applicative-order evaluation or normal-order
                evaluation.  He 
                
                  
                  
                    declares the following two functions
                  
                :
                <div class='snippet' id='javascript_7_23_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
function p() {
    return p();
}

function test(x, y) {
    return x === 0 ? 0 : y;
}
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=GYVwdgxgLglg9mABABwBQEpEG8BQj+IBOAplCIUmugNw4C+OOoksCiUxAzlKgB4A0iAJ6ZcBIqXJJeiALzzEABkQB+JYgBcw2nSA}{\usebox\lstbox}
</pre>

</div></div>
                Then he evaluates the 
                statement
                <div class='snippet' id='javascript_7_24_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'
\begin{lrbox}{\lstbox}
\begin{JavaScriptClickable}
test(0, p());
\end{JavaScriptClickable}
\end{lrbox}

\href{https://sourceacademy.nus.edu.sg/playground#chap=1&prgrm=GYVwdgxgLglg9mABABwBQEpEG8BQj+IBOAplCIUmugNw4C+OOoksCiUxAzlKgB4A0iAJ6ZcBIqXJJeiALzzEABkQB+JYgBcw2gw7dUiwVRpA}{\usebox\lstbox}
</pre>

</div></div>
                What behavior will Ben observe with an interpreter that uses
                applicative-order evaluation?  What behavior will he observe with an
                interpreter that uses normal-order evaluation?  Explain your answer.
                
                
                (Assume that the evaluation rule for 
                
                  
                  
                    conditional expressions
                  
                
                is the
                same whether the interpreter is using normal or applicative order:
                The predicate expression is evaluated first, and the result
                determines whether to evaluate
                the consequent or the alternative expression.)
		
	\hfill{\hyperref[ex:normal-order-vs-appl-order-test-Answer]{Solution}}\\
\end{Exercise}

\begin{Answer}[ref={ex:normal-order-vs-appl-order-test}]
		
		  <SPLIT>
		    
		      In applicative-order evaluation of
		      <kbd>test(0, p())</kbd>,
		      we need to evaluate the
		      argument expressions
		      before we can evaluate the return expression of
		      the function <kbd>test</kbd>.
		      The evaluation of the argument expression
		      <kbd>p()</kbd>
		      will not terminate, however: It will keep evaluating
		      application expressions of the form 
		      <kbd>p()</kbd>, and thus
		      the evaluation of
                      <kbd>test(0, p())</kbd>
		      will not produce a legitimate value.
		      In normal-order evaluation, on the other hand,
		      the function application
		      <kbd>test(0, p())</kbd>
		      would immediately evaluate the return expression of
		      the function <kbd>test</kbd>,
		      <kbd>x === 0 ? 0 : y</kbd>
		      after replacing the parameter
		      <kbd>x</kbd> with
		      <kbd>0</kbd> and
		      <kbd>y</kbd> with
		      <kbd>p()</kbd>.
		      The result of the replacing would be
		      <kbd>0 === 0 ? 0 : p()</kbd>.
		      The evaluation of the 
		      predicate
		      <kbd>0 === 0</kbd>
		      results in <EM>true</EM> and thus the conditional
		      expression evaluates to 0, without any need to
		      evaluate 
		      <kbd>p()</kbd>.
		    
		  </SPLIT>
		
\end{Answer}

      <hr><div class='footnote'>
<a class='footnote-number' id='footnote-1' href='#footnote-link-1'>[1] </a><FOOTNOTE>
                
                
                
                In JavaScript, other values are automatically converted into
	      <EM>true</EM> and
	      <EM>false</EM>
                according to <EM>conversion rules</EM>, but we choose not to make
		use of these conversion rules in this book.
              </FOOTNOTE></div><div class='footnote'>
<a class='footnote-number' id='footnote-2' href='#footnote-link-2'>[2] </a><FOOTNOTE>
                  For an expression of the form
                  <kbd>a (b > 0 ? + : -) b</kbd>
                  the JavaScript interpreter would not know the precedence of
		  the operator
                  between <kbd>a</kbd> and 
                  <kbd>b</kbd>, and therefore
		  such expressions are not allowed.</FOOTNOTE></div>
</SUBSECTION><div class='nav'>
<button type='button' class='btn btn-secondary' style='background-color: #fff;'>
<a href='/Users/xinyue/Documents/nus/y1s2/CP3108/sicp.js_test/html/chapter1/section1/subsection5.html'>&lt; Previous</a>
</button><div style='flex-grow: 1;'></div>
<button type='button' class='btn btn-secondary' style='background-color: #fff;'>
<a class='scroll-next' href='/Users/xinyue/Documents/nus/y1s2/CP3108/sicp.js_test/html/chapter1/section1/subsection7.html'>Next &gt;</a>
</button></div><div class='chapter_sign'>
1.1.6  Conditional Expressions and Predicates</div>	<div class='next-page'></div></div>